/*! D3-resume v1.3.0 https://github.com/glena/d3-resume | Germ√°n lena https://github.com/glena/ */
var d3Resume=function(d){var l=null,p=d3.time.format("%m/%d/%Y"),m=d3.time.format("%Y-%m-%d").parse,e=null,h=null,n=null,q=null,r=function(d){var a=0;d.forEach(function(c){c.id=a++;c.from=m(c.from);null==c.to?c.pto=new Date:(c.to=m(c.to),c.pto=c.to)})},s=function(d){d.forEach(function(a){a.diameter=h(a.pto)-h(a.from);null==a.to&&(a.diameter*=2)});d.sort(function(a,c){return c.diameter-a.diameter})},k=function(d,a,c,f,e){d.append("text").attr("font-size",a).style("font-weight",f).text(e).attr("transform",
c)},t=function(e,a,c,f,m,g,n){g=e.selectAll("g.info."+f).data(c).enter().append("g").attr("class",function(b){return f+b.id}).classed("info",!0).classed("default",function(b){return b.default_item}).classed(f,!0).attr("transform","translate("+[.1*d.width,g]+")").attr("fill-opacity",function(b){return b.default_item?1:0});k(g,"18px","translate(0,0)","normal",function(b){return b.type});k(g,"18px","translate(0,25)","normal",function(b){return b.title});k(g,"23px","translate(0,50)","normal",function(b){return b.institution});
k(g,"14px","translate(0,70)","bold",function(b){var a=p(b.from)+" - ";return a=null==b.to?a+"Now":a+p(b.to)});g=g.selectAll("text.description").data(function(b,a){var c=70;return b.description.split("\n").map(function(b){c+=20;return{text:b,position:c}})}).enter();k(g,"14px",function(b){return"translate(0,"+b.position+")"},"normal",function(b){return b.text});a.selectAll("path."+f).data(c).enter().append("path").classed(f,!0).classed("item",!0).attr("fill",function(b){return n(b)}).attr("fill-opacity",
.6).attr("d",function(b){b=b.diameter;var a=b/2;return"M0,0 q "+a+" "+m*(100+.7*a)+" "+b+" 0 z"}).attr("transform",function(a){return"translate("+[h(a.from),0]+")"}).on("mouseover",function(b){a.selectAll("path.item").transition().attr("stroke-width","1").attr("fill-opacity",.2);d3.select(this).transition().attr("stroke-width","2").attr("fill-opacity",1);l&&(clearTimeout(l),l=null);e.selectAll("g.info").transition().attr("fill-opacity",0);e.selectAll("g.info."+f+"."+f+b.id).transition().attr("fill-opacity",
1)}).on("mouseout",function(b){a.selectAll("path.item").transition().attr("stroke-width","2").attr("fill-opacity",.5);l=setTimeout(u,3E3)})},u=function(){e.selectAll("g.info").transition().attr("fill-opacity",0);e.selectAll("g.info.default").transition().attr("fill-opacity",1)},e=d3.select(d.wrapperSelector).append("svg").attr("width",d.width).attr("height",d.height),h=d3.time.scale().range([20,d.width-20]),n=d3.scale.linear().range([d.height,0]);n.domain([0,d.height]);q=d3.svg.axis().scale(h).orient("bottom").ticks(30).tickFormat(d3.time.format("%Y-%m"));
d3.json(d.dataUrl,function(k,a){r(a.experience);r(a.study);h.domain([d3.min([d3.min(a.experience,function(a){return a.from}),d3.min(a.study,function(a){return a.from})]),d3.max([d3.max(a.experience,function(a){return a.pto}),d3.max(a.study,function(a){return a.pto})])]);s(a.experience);s(a.study);var c=e.append("g").attr("class","graph-container").attr("transform","translate("+[0,d.height-200]+")");c.append("g").attr("class","x axis").attr("transform","translate(0,0)").call(q).selectAll("text").style("text-anchor",
"end").attr("transform","rotate(-60)");c.append("text").classed("axis-label",!0).text("WORKS").style("text-anchor","center").attr("transform","translate(25,-55) rotate(-90)");c.append("text").classed("axis-label",!0).text("STUDIES").style("text-anchor","center").attr("transform","translate(25,130) rotate(-90)");t(e,c,a.experience,"experience",-1,d.height/8,d.getItemFillCollor);t(e,c,a.study,"study",1,d.height/8,d.getItemFillCollor)})};
